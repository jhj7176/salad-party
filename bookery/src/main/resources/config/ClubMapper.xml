<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.salpa.bookery.model.ClubDao">
	<select id="selectNoticeAll" resultType="clubBean">
		select * from club where book_bid=0 and deleted!=1 order by depth desc
	</select>
	
	<select id="selectOneNotice" resultType="clubBean" parameterType="_int">
		select * from club where book_bid=0 and deleted!=1 and id=${id}
	</select>

	<select id="selectBookClubAll" resultType="clubBean">
		select * from club where book_bid != 0;
	</select>
	
	<insert id="insertBookClub" parameterType="bookBean">
		insert into club (updatetime, title, book_bid) values (now(),#{title},#{bid})

	</insert>
	
	<insert id="insertNotice" parameterType="clubBean">
		insert into club (createtime, title, content, depth, num, user_id, book_bid) 
			values(now(),#{title},#{content},#{depth},#{num},#{user_id}, 0);
	</insert>
	
	<update id="updateNotice" parameterType="clubBean">
		update club set updatetime=now(), title=#{title}, content=#{content}, depth=#{depth} where id=#{id}
	</update>
	
	<update id="deleteClubData" parameterType="_int">
		update club set deleted=1 where id=#{id}
	</update>
	
</mapper>